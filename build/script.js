(()=>{"use strict";const t=class{constructor(){this.past=[],this.future=[]}updateText(t){this.current_project&&this.past.push(this.current_project),this.current_project=t,this.future=[]}undo(){this.past.length>0&&(this.current_project&&this.future.push(this.current_project),this.current_project=this.past.pop())}redo(){this.future.length>0&&(this.current_project&&this.past.push(this.current_project),this.current_project=this.future.pop())}},e=class{constructor(t,e){this.isSelecting=!1,this.selectionBox=document.getElementById("selection_box"),this.selectionBoxX=0,this.selectionBoxY=0,this.controls=t,this.move=e}initSelectionBox(){this.selectionBox&&(this.isSelecting=!0,this.selectionBoxX=this.move.calcPositionCursorX(this.controls.M_INIT_X),this.selectionBoxY=this.move.calcPositionCursorY(this.controls.M_INIT_Y),this.selectionBox.style.left=`${this.selectionBoxX}`,this.selectionBox.style.top=`${this.selectionBoxY}`,this.selectionBox.style.width="0px",this.selectionBox.style.height="0px",this.selectionBox.style.display="block")}updateSelectionBox(){if(this.selectionBox&&this.isSelecting){const t=this.move.calcPositionCursorX(this.controls.M_X),e=this.move.calcPositionCursorY(this.controls.M_Y),i=Math.abs(t-this.selectionBoxX),o=Math.abs(e-this.selectionBoxY),s=Math.min(t,this.selectionBoxX),n=Math.min(e,this.selectionBoxY);this.selectionBox.style.left=`${s}px`,this.selectionBox.style.top=`${n}px`,this.selectionBox.style.width=`${i}px`,this.selectionBox.style.height=`${o}px`}}finishSelectionBox(){this.isSelecting&&!this.controls.M_BUTTON_LEFT&&this.selectionBox&&(this.selectionBox.style.display="none",this.isSelecting=!1)}},i=class{constructor(t,e){this.drawPosition=document.getElementById("project_draw_position"),this.drawRect=document.getElementById("project_draw_rect"),this.controls=t,this.projectHistory=e}setPositionDraw(t,e){this.drawPosition&&(this.drawPosition.style.transform=`translate(${t}px, ${e}px)`)}setPosition(t,e){this.setPositionDraw(t,e),this.setPositionProject(t,e)}getPositionDrawX(){var t;const e=null===(t=this.drawPosition)||void 0===t?void 0:t.getBoundingClientRect();return e?e.left:0}getPositionDrawY(){var t;const e=null===(t=this.drawPosition)||void 0===t?void 0:t.getBoundingClientRect();return e?e.top:0}getPositionDrawPoint(){var t,e,i;const o=null===(t=this.drawPosition)||void 0===t?void 0:t.getBoundingClientRect();return{x:null!==(e=null==o?void 0:o.left)&&void 0!==e?e:0,y:null!==(i=null==o?void 0:o.top)&&void 0!==i?i:0}}getPositionDrawPointXY(){var t,e,i;const o=null===(t=this.drawPosition)||void 0===t?void 0:t.getBoundingClientRect();return{x:null!==(e=null==o?void 0:o.x)&&void 0!==e?e:0,y:null!==(i=null==o?void 0:o.y)&&void 0!==i?i:0}}getPositionProjectPoint(){var t,e;return null!==(e=null===(t=this.projectHistory.current_project)||void 0===t?void 0:t.position)&&void 0!==e?e:{x:0,y:0}}setPositionProject(t,e){var i;const o=null===(i=this.projectHistory.current_project)||void 0===i?void 0:i.position;o&&(o.x=t,o.y=e)}calcPositionCursorX(t){var e,i;const o=null===(e=this.drawPosition)||void 0===e?void 0:e.getBoundingClientRect();return t-(null!==(i=null==o?void 0:o.left)&&void 0!==i?i:0)}calcPositionCursorY(t){var e,i;const o=null===(e=this.drawPosition)||void 0===e?void 0:e.getBoundingClientRect();return t-(null!==(i=null==o?void 0:o.top)&&void 0!==i?i:0)}moveProject(t){var e;const i=null===(e=this.drawRect)||void 0===e?void 0:e.getBoundingClientRect(),o=i&&t.clientX>=i.left&&t.clientX<=i.right&&t.clientY>=i.top&&t.clientY<=i.bottom;if(this.controls.M_BUTTON_LEFT&&o){const t=this.getPositionProjectPoint();this.setPositionDraw(t.x+this.controls.M_DELTA_X,t.y+this.controls.M_DELTA_Y)}}moveProjectOnOneDirection(t){var e;const i="UP"===this.controls.SCROLL_STATE?this.controls.JUMP_SCROLL_MOVE:-this.controls.JUMP_SCROLL_MOVE,o=null===(e=this.projectHistory.current_project)||void 0===e?void 0:e.position;o&&(t.shiftKey?this.setPosition(o.x+i,o.y):this.setPosition(o.x,o.y+i))}initMove(){}finishMove(){var t;const e=null===(t=this.projectHistory.current_project)||void 0===t?void 0:t.position;e&&this.setPositionProject(e.x+this.controls.M_DELTA_X,e.y+this.controls.M_DELTA_Y)}},o=class{constructor(t){this.body=document.querySelector("body"),this.selectionBox=t.selectionBox,this.actions=t.actions,this.zoom=t.zoom,this.move=t.move,this.bihavior=t.bihavior}onSelectionModeActionsKeyDown(t){t.shiftKey&&this.body&&this.body.setAttribute("selected","move-h")," "!==t.key||this.selectionBox.isSelecting||(this.actions.setMoveMode(),this.move.initMove()),t.ctrlKey&&!this.selectionBox.isSelecting&&(this.actions.setZoomMode(),this.zoom.initZoomMode())}onActionsKeyUp(t){"ZOOM"===this.actions.EDIT_MODE&&this.zoom.finishZoomMode(),this.bihavior.decelAllElement(),this.actions.setSelectionMode(),t.preventDefault()}},s=class{constructor(t,e){this.MIN_ZOOM=.1,this.MAX_ZOOM=3,this.NORMAL_SCALE=1,this.point={x:0,y:0},this.elPoint={x:0,y:0},this.deltaPoint={x:0,y:0},this.controls=t,this.projectHistory=e,this.draw=document.getElementById("project_draw")}initZoomMode(){}finishZoomMode(){}updateZoomState(){const{move:t}=this.controls,e="UP"===this.controls.SCROLL_STATE?this.controls.SCALE_JUMP:-this.controls.SCALE_JUMP,i=this.getScale()+e;this.setScale(i)}setScaleDraw(t){this.draw&&t<=this.MAX_ZOOM&&t>=this.MIN_ZOOM&&(this.draw.style.transform=`scale(${t})`)}setScaleProject(t){this.projectHistory.current_project&&t<=this.MAX_ZOOM&&t>=this.MIN_ZOOM&&(this.projectHistory.current_project.zoom=t)}setScale(t){this.setScaleDraw(t),this.setScaleProject(t)}getScale(){var t,e;return null!==(e=null===(t=this.projectHistory.current_project)||void 0===t?void 0:t.zoom)&&void 0!==e?e:this.NORMAL_SCALE}},n=class{constructor(t){this.W_WIDTH=window.innerWidth,this.W_HEIGHT=window.innerHeight,this.JUMP_SCROLL_MOVE=50,this.M_X=0,this.M_Y=0,this.M_INIT_X=0,this.M_INIT_Y=0,this.M_DELTA_X=0,this.M_DELTA_Y=0,this.M_BUTTON_LEFT=!1,this.M_BUTTON_MIDDLE=!1,this.M_BUTTON_RIGHT=!1,this.SCROLL_STATE="STOP",this.SCALE_JUMP=.1,this.isScrolling=0,this.main=t,this.actions=t.actions,this.move=new i(this,t.projectHistory),this.zoom=new s(this,t.projectHistory),this.selectionBox=new e(this,this.move),this.bihavior=t.bihavior,this.modes=new o(this),this.addEventListeners()}addEventListeners(){const t=document.getElementById("project_draw_rect");window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this)),window.addEventListener("mousemove",this.handleMouseMove.bind(this)),window.addEventListener("wheel",this.handleScroll.bind(this),{passive:!1}),window.addEventListener("mouseup",this.handleMouseUp.bind(this)),null==t||t.addEventListener("mousedown",this.handleMouseDown.bind(this)),window.addEventListener("contextmenu",(t=>t.preventDefault())),null==t||t.addEventListener("click",this.handleClick.bind(this))}handleClick(t){this.main.cleanAllSelectables()}handleKeyDown(t){"SELECTION"===this.actions.EDIT_MODE&&this.modes.onSelectionModeActionsKeyDown(t)}handleKeyUp(t){this.modes.onActionsKeyUp(t)}handleMouseMove(t){switch(this.M_X=t.clientX,this.M_Y=t.clientY,this.M_DELTA_X=this.M_X-this.M_INIT_X,this.M_DELTA_Y=this.M_Y-this.M_INIT_Y,this.actions.EDIT_MODE){case"SELECTION":this.selectionBox.updateSelectionBox();break;case"MOVE":this.move.moveProject(t)}}handleScroll(t){switch(this.SCROLL_STATE=t.deltaY<0?"UP":"DOWN",clearTimeout(this.isScrolling),this.isScrolling=setTimeout((()=>{this.SCROLL_STATE="STOP"}),300),this.actions.EDIT_MODE){case"SELECTION":this.move.moveProjectOnOneDirection(t),this.selectionBox.updateSelectionBox();break;case"ZOOM":this.zoom.updateZoomState()}t.preventDefault()}handleMouseUp(t){switch(this.updateMouseButtons(t,!1),this.actions.EDIT_MODE){case"SELECTION":this.selectionBox.finishSelectionBox();break;case"MOVE":this.move.finishMove()}this.resetMousePosition()}handleMouseDown(t){this.updateMouseButtons(t,!0),this.M_INIT_X=t.clientX,this.M_INIT_Y=t.clientY,"SELECTION"===this.actions.EDIT_MODE&&this.M_BUTTON_LEFT&&0===t.button&&(this.selectionBox.initSelectionBox(),t.preventDefault())}updateMouseButtons(t,e){0===t.button?this.M_BUTTON_LEFT=e:1===t.button?this.M_BUTTON_MIDDLE=e:2===t.button&&(this.M_BUTTON_RIGHT=e)}resetMousePosition(){this.M_INIT_X=0,this.M_INIT_Y=0,this.M_DELTA_X=0,this.M_DELTA_Y=0}},r=class{constructor(t){this.EDIT_MODE="SELECTION",this.projectDrawScope=document.getElementById("project_draw_rect"),this.bihavior=t}openMenuFile(){console.log("TODO")}openRecentProjects(){console.log("TODO")}openMenuNewElement(){const t=document.getElementById("menu_new_element");t&&(this.bihavior.selectElement(t),this.bihavior.toggleIsOpen(t))}closeMenuNewElement(){const t=document.getElementById("menu_new_element");t&&(this.bihavior.decelElement(t),this.bihavior.toggleIsOpen(t))}addNewElement(t){switch(t){case"OVAL":case"RECT":case"FRAME":case"IMAGE":console.log("TODO")}this.closeMenuNewElement()}setSelectionMode(){const t=document.getElementById("btn_selection_mode");t&&(this.bihavior.selectElement(t),this.EDIT_MODE="SELECTION")}setMoveMode(){const t=document.getElementById("btn_move_mode");t&&this.projectDrawScope&&(this.bihavior.selectElement(t),this.EDIT_MODE="MOVE",this.projectDrawScope.setAttribute("selected","move"))}setZoomMode(){const t=document.getElementById("btn_zoom_mode");t&&this.projectDrawScope&&(this.bihavior.selectElement(t),this.EDIT_MODE="ZOOM",this.projectDrawScope.setAttribute("selected","zoom"))}openMenuPlugins(){const t=document.getElementById("btn_plugin");t&&this.bihavior.selectElement(t)}openFolder(t){console.log("TODO")}setEditMode(t){switch(t){case"DESIGN":case"PROTOTYPE":console.log("TODO")}}addNewProp(t,e){switch(t){case"HTML":this.bihavior.addPropertieHTML(e);break;case"CSS":this.bihavior.addPropertieCSS(e)}}removePropretie(t){const e=document.getElementById(t);e&&this.bihavior.removeUiPropretie(e)}},l=class{constructor(t,e){this.currentKeybind=[],this.newElement={action:()=>{this.actions.openMenuNewElement()},f:{action:()=>{this.actions.addNewElement("FRAME")}},c:{action:()=>{this.actions.addNewElement("OVAL")}},r:{action:()=>{this.actions.addNewElement("RECT")}},i:{action:()=>{this.actions.addNewElement("IMAGE")}}},this.keymaps={Control:{n:Object.assign({mode:!0},this.newElement)},Insert:Object.assign({mode:!0},this.newElement)},this.keydown={},this.actions=t,this.bihavior=e,this.addEventListener()}isKeybind(t){return void 0===t.action||"function"==typeof t.action&&void 0===t.mode||"boolean"==typeof t.mode}isRecordOfObject(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}checkKeybind(t,e,i=""){if(t.action&&"function"==typeof t.action&&(t.action(),e.preventDefault()),t.mode&&this.currentKeybind.push(i),this.isRecordOfObject(t))for(const i in t)this.keydown[i]&&this.checkKeybind(t[i],e,i)}keyMode(t,e,i){let o=!1;if(this.isKeybind(t)&&(t.action&&"function"==typeof t.action&&(t.action(),o=!0),t.mode&&this.currentKeybind.push(i)),e<this.currentKeybind.length){const o=this.currentKeybind[e];this.isRecordOfObject(t[o])&&this.keyMode(t[o],e+1,i)}o&&(this.currentKeybind=[])}addEventListener(){window.addEventListener("keydown",(t=>{this.keydown[t.key]=!0})),window.addEventListener("keyup",(t=>{this.keydown[t.key]=!1})),window.addEventListener("keydown",(t=>{"F5"!==t.key&&(this.currentKeybind.length>0?this.keyMode(this.keymaps,0,t.key):this.checkKeybind(this.keymaps,t),"Escape"===t.key&&(this.actions.closeMenuNewElement(),this.bihavior.closePopovers(),this.currentKeybind=[]))}))}},c=class{constructor(t){this.main=t,document.addEventListener("click",(e=>{const i=document.querySelector(".popover");i&&e.target instanceof Node&&!i.contains(e.target)&&(t.actions.closeMenuNewElement(),this.closePopovers())}))}generateSlug(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}toggleIsOpen(t){const e="is_open";"true"===t.getAttribute(e)?t.setAttribute(e,"false"):t.setAttribute(e,"true")}selectElement(t){this.decelAllElement(),t.setAttribute("selected","true")}decelAllElement(){const t=Array.from(document.querySelectorAll(".selection"));for(const e of t)this.decelElement(e)}decelElement(t){t.setAttribute("selected","false")}newPropertie(t){var e,i;const o=null===(e=document.getElementById("item_prop_template"))||void 0===e?void 0:e.cloneNode(!0);return o&&(o.removeAttribute("visible"),o.setAttribute("id",null!==(i=null==t?void 0:t.id)&&void 0!==i?i:this.generateSlug())),o}loadPropertieInput(t,e,i){const o=t.querySelector(".prop_input_name input"),s=t.querySelector(".prop_input_value input");null==o||o.addEventListener("input",(o=>{var s;const n=o.target;this.main.setPropertyInSelectedComponent(null!==(s=null==i?void 0:i.id)&&void 0!==s?s:t.id,"name",n.value,e)})),null==s||s.addEventListener("input",(o=>{var s;const n=o.target;this.main.setPropertyInSelectedComponent(null!==(s=null==i?void 0:i.id)&&void 0!==s?s:t.id,"value",n.value,e)})),i&&(o.value=i.name,s.value=i.value)}addPropertieHTML(t){var e;const i=t?Object.assign(Object.assign({},t),{id:null!==(e=t.id)&&void 0!==e?e:this.generateSlug()}):void 0,o=document.getElementById("list_props_html"),s=this.newPropertie(i);s&&(null==o||o.appendChild(s),this.loadPropertieInput(s,"HTML",i))}addPropertieCSS(t){var e;const i=t?Object.assign(Object.assign({},t),{id:null!==(e=t.id)&&void 0!==e?e:this.generateSlug()}):void 0,o=document.getElementById("list_props_css"),s=this.newPropertie(i);s&&(null==o||o.appendChild(s),this.loadPropertieInput(s,"CSS",i))}removeProprety(t){this.main.removeProprety(t)}removeUiPropretie(t){t&&(this.removeProprety(t.id),t.remove(),this.main.buildProject(!0))}closePopovers(){const t=document.querySelector(".popover");t&&t.setAttribute("is_open","false")}};class a{constructor(){this.translations={en:{project_name:"Project Name",user_name:"Username",html:"Html",css:"Css",javascript:"javascript",assets:"Assets",design:"Design",prototype:"Prototype"},pt_br:{project_name:"Nome do Projeto",user_name:"Nome de usuário",html:"Html",css:"Css",javascript:"javascript",assets:"Assets",design:"Design",prototype:"Prototipo"}},this.base_view_body={id:"body",name:"body",is_view:!0,tag:"div",template:"",position:{x:-250,y:-250},props:[],styles:[{name:"width",value:"500px"},{name:"height",value:"500px"},{name:"background",value:"#fff"},{name:"position",value:"absolute"}],content:[]},this.base_json_template={id:"html",name:"",is_view:!1,tag:"html",template:"",position:{x:0,y:0},zoom:1,props:[{name:"lang",value:"pt-BR"}],styles:[],content:[{id:"head",name:"",is_view:!1,tag:"head",template:"",props:[],styles:[],content:[{name:"",is_view:!1,tag:"meta",template:"",props:[{name:"charset",value:"UTF-8"}],styles:[],content:[]},{name:"",is_view:!1,tag:"meta",template:"",props:[{name:"name",value:"viewport"},{name:"content",value:"width=device-width, initial-scale=1.0"}],styles:[],content:[]},{name:"",is_view:!1,tag:"title",template:"",props:[],styles:[],content:["My Site"]}]},{name:"",is_view:!0,tag:"body",id:"body",template:"",props:[],styles:[],content:[{name:"",is_view:!0,id:"teste_h1",tag:"h1",template:"",props:[],styles:[{name:"color",value:"red"}],content:["Teste"]}]}]}}}const h=class{constructor(t,e){this.translations=t.translations,this.setLanguage(e)}setLanguage(t){const e=Array.from(document.querySelectorAll("[data-translate]"));if(e)for(const i of e){const e=i.getAttribute("data-translate");e&&this.translations[t][e]&&(i.textContent=this.translations[t][e])}}},d=new class{constructor(){this.propListHtml=document.getElementById("list_props_html"),this.propListCSS=document.getElementById("list_props_css"),this.RENDER_LABEL="BAB_project__",this.common=new a,this.bihavior=new c(this),this.actions=new r(this.bihavior),this.keybinds=new l(this.actions,this.bihavior),this.projectHistory=new t,this.controls=new n(this),this.translations=new h(this.common,"pt_br")}getComponentProjectById(t,e){if(!e)return this.getComponentProjectById(t,this.projectHistory.current_project);if(e.id===t)return e;if(Array.isArray(e.content))for(const i of e.content){const e=this.getComponentProjectById(t,i);if(e)return e}}setComponentProjectById(t,e,i=this.projectHistory.current_project,o=t=>{this.projectHistory.updateText(t)}){if(i&&(i.id===t&&o(e),Array.isArray(i.content)))for(let o=0;o<i.content.length;o++)this.setComponentProjectById(t,e,i.content[o],(t=>{Array.isArray(i.content)&&(i.content[o]=t)}))}removeProprety(t){var e;const i=this.getComponentSelected();if(!i)return;const o=this.getComponentProjectById(null!==(e=i.getAttribute(`${this.RENDER_LABEL}id`))&&void 0!==e?e:"");o&&(o.props=o.props.filter((e=>e.id!==t)),o.styles=o.styles.filter((e=>e.id!==t)))}cssSanitize(t){const e=document.createElement("div"),i=t.split(";").filter((t=>""!==t.trim())),o=[];for(let t of i){const[i,s]=t.split(":").map((t=>t.trim()));if(i&&s){const t=e.style.getPropertyValue(i);e.style.setProperty(i,null!=s?s:"none"),""!==e.style.getPropertyValue(i)&&o.push(`${i}: ${s}`),e.style.setProperty(i,t)}}return o.join("; ")}setPropertyInSelectedComponent(t,e,i,o){var s,n;const r=this.getComponentSelected();if(!r)return;const l=this.getComponentProjectById(null!==(s=r.getAttribute(`${this.RENDER_LABEL}id`))&&void 0!==s?s:"");if(!l)return;const c=l.props;if("HTML"===o){let o=c.find((e=>e.id===t))||{name:"",value:"",id:t};"name"===e&&(o.name&&r.removeAttribute(o.name),o.name=i),"value"===e&&(o.value=i),c.includes(o)||c.push(o),r.setAttribute(o.name,o.value)}if("CSS"===o){const o=this.getProp(c,"style"),s=this.stringToProps(null!==(n=null==o?void 0:o.value)&&void 0!==n?n:""),a=l.styles;for(const t of s)a.push(t);let h=a.find((e=>e.id===t))||{name:"",value:"none",id:t};"name"===e&&(h.name=i),"value"===e&&(h.value=i),a.includes(h)||a.push(h);let d=this.propsTosStringCss(a);d=this.cssSanitize(d),r.setAttribute("style",d)}}initNewProject(){this.projectHistory.updateText(this.common.base_json_template)}cleanAllSelectables(){const t=document.querySelectorAll(`[${this.RENDER_LABEL}selectable]`);t&&t.forEach((t=>{t.setAttribute(`${this.RENDER_LABEL}selected`,"false")})),this.propListHtml&&(this.propListHtml.innerHTML=""),this.propListCSS&&(this.propListCSS.innerHTML="")}onSelectComponente(t){var e;if("SELECTION"!==this.actions.EDIT_MODE)return;this.cleanAllSelectables(),t.setAttribute(`${this.RENDER_LABEL}selected`,"true");const i=this.getComponentProjectById(null!==(e=t.getAttribute(`${this.RENDER_LABEL}id`))&&void 0!==e?e:"");if(console.log(i),i){for(const t of i.props)t.name.toLowerCase().startsWith(this.RENDER_LABEL.toLowerCase())||"style"===t.name||this.actions.addNewProp("HTML",t);for(const t of i.styles)this.actions.addNewProp("CSS",t)}}loadOnclickEvents(){const t=document.querySelectorAll(`[${this.RENDER_LABEL}selectable]`);t&&t.forEach((t=>{t.onclick=t=>{const e=t.target;this.onSelectComponente(e),t.stopPropagation()}}))}updateCssProp(t,e,i){const o=new RegExp(`${e}:\\s*[^;]+;`,"g"),s=`${e}: ${i};`;return o.test(t)?t.replace(o,s):`${t} ${s}`}stringToProps(t){return t.split(";").map((t=>t.trim())).filter((t=>t)).map((t=>{const[e,i]=t.split(":").map((t=>t.trim()));return{name:e,value:i}}))}getProp(t,e){return t.find((t=>t.name===e))}addProp(t,e){var i;let o=!1;const s=Object.assign(Object.assign({},e),{id:null!==(i=e.id)&&void 0!==i?i:this.bihavior.generateSlug()}),n=t.map((t=>t.name===s.name?(o=!0,s):t));return o||n.push(s),n}getComponentSelected(){return document.querySelector(`[${this.RENDER_LABEL}selected="true"]`)}buildBodyRenderMode(t){var e;const i=Object.assign({},this.common.base_view_body),o=null!==(e=t.position)&&void 0!==e?e:i.position;return o&&(i.styles.push({name:"left",value:`${o.x}px`,id:this.bihavior.generateSlug()}),i.styles.push({name:"top",value:`${o.y}px`,id:this.bihavior.generateSlug()})),i.props=t.props.concat(i.props),i.props.push({name:`${this.RENDER_LABEL}body`,value:"",id:this.bihavior.generateSlug()}),i.styles=t.props.concat(i.styles),i.content=t.content,i}propsTosString(t){return t.map((t=>`${t.name}="${t.value}"`)).join(" ")}propsTosStringCss(t){return t.map((t=>`${t.name}: ${t.value};`)).join(" ")}generateTag(t,e){var i;const o=t.tag;let s=[...t.props];return e?(s=s.map((t=>("class"===t.name&&(t.value=t.value.split(" ").map((t=>t.startsWith(this.RENDER_LABEL)?t:`${this.RENDER_LABEL}${t}`)).join(" ")),t))),s.push({name:`${this.RENDER_LABEL}selectable`,value:""}),s.push({name:`${this.RENDER_LABEL}id`,value:null!==(i=t.id)&&void 0!==i?i:""})):s=s.filter((t=>!t.name.startsWith(this.RENDER_LABEL))),t.styles=t.styles.map((t=>(t.id||(t.id=this.bihavior.generateSlug()),t))),s.push({name:"style",value:this.propsTosStringCss(t.styles),id:this.bihavior.generateSlug()}),`<${o} ${this.propsTosString(s)}>${t.content?Array.isArray(t.content)?t.content.map((t=>this.buildTag(t,e))).join("\n"):t.content:""}</${o}>`}buildTag(t,e=!1){if("string"==typeof t)return t;let i=t;return e&&"body"===i.tag&&(i=this.buildBodyRenderMode(i),i.id&&this.setComponentProjectById(i.id,i)),this.generateTag(i,e)}buildProject(t=!1){let e="";if(this.projectHistory.current_project)if(t){const t=document.getElementById("project_draw");e+=this.buildTag(this.projectHistory.current_project.content[1],!0),t.innerHTML=e,this.loadOnclickEvents()}else e="<!DOCTYPE html>",e+=this.buildTag(this.projectHistory.current_project);return e}exportProject(){this.initNewProject();const t=new Blob([this.buildProject()],{type:"text/html"}),e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="index.html",e.click(),URL.revokeObjectURL(e.href)}};d.initNewProject(),d.buildProject(!0),window.main=d})();